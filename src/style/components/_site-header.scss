@use '../abstracts/variables/colors' as colors;
@use '../abstracts/variables/typography' as typography;
@use '../abstracts/mixins/gradient' as *;
@use '../abstracts/mixins/animations' as *;
@use '../components/icon' as icons;

$icon-size: typography.$font-size-large;

.site-header {
    summary::before {
        color: colors.$sidebar-search-icon;
        font-family: icons.$font-family;
        font-size: $icon-size;
        font-weight: normal;
        font-style: normal;
        font-variant: normal;
        line-height: 1;
        text-rendering: auto;
        text-transform: none;
    }

    > details.panel,
    > details.panel > summary > details.options {
        &[open] {
            & > summary::before {
                background: grey;
            }
        }
    }

    > details.panel {
        > summary:before {
            content: icons.$glyph-menu;
        }

        > summary {
            @include radial-gradient(
                circle, 
                top-right,
                colors.$sidebar-search-background grey
            );
            color: #30353b;
        }

        > summary > details.options {
            > summary::before {
                content: icons.$glyph-cog;
            }

            > summary {
                > form.search {

                    &::before {
                        color: colors.$sidebar-search-icon;
                        content: icons.$glyph-search;
                        font-family: icons.$font-family;
                        font-size: $icon-size;
                        font-weight: 900;
                        pointer-events: none;
                    }

                    &:focus-within {
                        &::before {
                            animation-duration: 0.6s; 
                            animation-iteration-count: infinite;
                            animation-name: animation_blink;
                            animation-timing-function: ease-in;
                            color: colors.$sidebar-search-icon-active;
                            z-index: 2;
                        }
                    }

                    input.search-input {
                        background: transparent;
                        border: none;
                        color: transparent;
                        font-size: inherit;

                        &:focus {
                            background: colors.$sidebar-search-background-focus;
                            color: colors.$sidebar-search-text-active;
                            outline: none;

                            &::placeholder {
                                color: black;
                            }
                        }

                        &::placeholder {
                            color: transparent;
                        }
                    }
                }
            }

            .options-content {
                background: white;
            }
        }

        a.brand {
            text-decoration: none;

            > .brand-text {
                color: colors.$sidebar-brand-text;
                font-size: 1.75rem;
                font-weight: 600;
            }
        }

        summary::-webkit-details-marker {
            display: none;
        }

        summary::marker {
            content: '';
        }
    }
}
